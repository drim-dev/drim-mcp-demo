# MCP Demo: Todo-приложение для демонстрации MCP-серверов

## Общая концепция

Демонстрационный проект для курса по использованию ИИ-агентов в разработке. Простое Todo-приложение на Next.js + Prisma + PostgreSQL, которое служит объектом демонстрации. Главная ценность — набор Claude Code скиллов, показывающих, как ИИ-агент использует MCP-серверы для реальных задач разработки и поддержки.

MCP-серверы используются не внутри продукта, а как инструменты разработчика/агента на этапе разработки и поддержки.

## Todo-приложение

### Функциональность

- Создание, редактирование, удаление задач
- Статусы: `pending`, `in_progress`, `done`
- Приоритеты: `low`, `medium`, `high`
- Фильтрация по статусу и приоритету

### Схема БД

```
User  — id, name, email, createdAt
Todo  — id, title, description, status, priority, userId, createdAt, updatedAt
```

### Технический стек

- Next.js 14+ (App Router)
- Prisma ORM + PostgreSQL
- Tailwind CSS
- Docker Compose для PostgreSQL
- Seed-скрипт с тестовыми данными

## Сценарии MCP

### Скилл `debug-db` — PostgreSQL MCP

**Когда:** Отладка данных, проверка состояния БД, поиск проблем.

Примеры:
- "Почему у пользователя X нет задач?" — SELECT по users и todos
- "Сколько задач в статусе pending старше 7 дней?" — аналитический запрос
- "Проверь схему таблицы todos" — инспекция структуры

### Скилл `manage-issues` — GitHub MCP

**Когда:** Управление задачами в GitHub прямо из Claude Code.

Примеры:
- "Создай issue на баг: задачи не сортируются по приоритету" — создание issue с описанием и лейблами
- "Покажи открытые issues" — список текущих задач
- "Закрой issue #5, баг пофикшен" — закрытие с комментарием

### Скилл `e2e-check` — Playwright MCP

**Когда:** Визуальная проверка UI, прохождение пользовательских сценариев.

Примеры:
- "Открой приложение и проверь, что список задач отображается" — навигация + скриншот
- "Создай задачу через UI и проверь, что она появилась" — заполнение формы + проверка
- "Проверь, что фильтрация по статусу работает" — клики по фильтрам + проверка

### Скилл `full-cycle` — Все 3 MCP вместе

Сквозной сценарий: "Пользователь жалуется, что его задачи пропали"

1. **Playwright MCP** — открываем приложение, видим пустой список
2. **PostgreSQL MCP** — проверяем БД, находим что задачи есть, но статус некорректный
3. **GitHub MCP** — создаём issue с описанием бага и данными из БД
4. Агент фиксит код
5. **Playwright MCP** — проверяем, что задачи снова отображаются
6. **GitHub MCP** — закрываем issue с комментарием

## Инфраструктура

### Docker Compose

Только PostgreSQL. Next.js запускается локально через `npm run dev`.

```yaml
services:
  db:
    image: postgres:16
    ports: 5432:5432
    environment: POSTGRES_DB, POSTGRES_USER, POSTGRES_PASSWORD
    volumes: postgres-data (persistent)
```

### MCP-конфигурация (`.mcp.json`)

Три MCP-сервера:
- **PostgreSQL MCP** — connection string к локальному Docker-контейнеру
- **GitHub MCP** — использует `gh` CLI или токен для авторизации
- **Playwright MCP** — запускает браузер для взаимодействия с UI

### Seed-данные

- 3 пользователя (Alice, Bob, Charlie)
- 10-15 задач с разными статусами и приоритетами
- Намеренно "проблемные" данные для демонстрации отладки (задачи с `status: null`, задачи без привязки к пользователю)

## Структура проекта

```
drim-mcp-demo/
├── app/
│   ├── layout.tsx
│   ├── page.tsx
│   ├── globals.css
│   └── api/
│       └── todos/
│           ├── route.ts        # GET, POST
│           └── [id]/
│               └── route.ts    # PATCH, DELETE
├── components/
│   ├── TodoList.tsx
│   ├── TodoItem.tsx
│   └── TodoForm.tsx
├── prisma/
│   ├── schema.prisma
│   └── seed.ts
├── .mcp.json                   # Конфигурация MCP-серверов
├── .claude/
│   └── skills/
│       ├── debug-db/
│       │   └── SKILL.md
│       ├── manage-issues/
│       │   └── SKILL.md
│       ├── e2e-check/
│       │   └── SKILL.md
│       └── full-cycle/
│           └── SKILL.md
├── docker-compose.yml
├── package.json
├── tsconfig.json
├── tailwind.config.ts
└── README.md
```

## Порядок реализации

1. **Инфраструктура** — `docker-compose.yml`, `package.json`, конфиги Next.js/Prisma/Tailwind
2. **БД** — `schema.prisma`, миграции, `seed.ts`
3. **API** — CRUD-эндпоинты для todos
4. **UI** — компоненты и страница
5. **MCP-конфигурация** — `.mcp.json`
6. **Скиллы** — четыре SKILL.md с описанием сценариев
7. **README** — инструкция по запуску и демонстрации
